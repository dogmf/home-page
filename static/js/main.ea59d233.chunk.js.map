{"version":3,"sources":["MyPhoto/src/dogmf_face_face.png","MyPhoto/src/dogmf_face_glasses.png","MyPhoto/src/dogmf_face_shadow.png","MyPhoto/src/dogmf_face_hair.png","MyPhoto/subscribeToMotion.js","MyPhoto/useDeviceOrientationGrant.js","MyPhoto/MyPhoto.jsx","App.jsx","index.js","MyPhoto/src/myPhoto.module.css","App.module.css"],"names":["getP","size","point","setMouseMoveListener","callback","handler","e","body","document","html","documentElement","height","Math","max","scrollHeight","offsetHeight","clientHeight","scrollWidth","offsetWidth","clientWidth","getSize","w","h","x","y","window","addEventListener","removeEventListener","getCenter","center","ratio","difference","abs","sign","modifyPoint","subscribeToMotion","cb","coords","map","n","toFixed","removeDeviceMoveListener","xCenter","yCenter","console","log","beta","gamma","mx","my","setDeviceMoveListener","removeMouseMoveListener","useDeviceOrientationGrant","useState","DeviceOrientationEvent","requestPermission","granted","setGranted","getGrant","useCallback","a","result","useEffect","useMemo","imageMoveStyle","k","position","transform","MyPhoto","setCoords","onClick","className","CLASSES","containerBlock","image","src","FaceImage","style","alt","HairImage","GlassesImage","ShadowImage","App","card","cardText","ReactDOM","render","StrictMode","getElementById","module","exports"],"mappings":"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","file":"static/js/main.ea59d233.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/dogmf_face_face.4620fca6.png\";","export default __webpack_public_path__ + \"static/media/dogmf_face_glasses.4d81124d.png\";","export default __webpack_public_path__ + \"static/media/dogmf_face_shadow.88f2f6d9.png\";","export default __webpack_public_path__ + \"static/media/dogmf_face_hair.191ddfdf.png\";","const getSize = () => {\n  var body = document.body,\n    html = document.documentElement;\n\n  var height = Math.max(\n    body.scrollHeight,\n    body.offsetHeight,\n    html.clientHeight,\n    html.scrollHeight,\n    html.offsetHeight\n  );\n  var width = Math.max(\n    body.scrollWidth,\n    body.offsetWidth,\n    html.clientWidth,\n    html.scrollWidth,\n    html.offsetWidth\n  );\n  return [width, height];\n};\n\nconst getP = (size, point) => (point - size / 2) / (size / 2);\n\nconst setMouseMoveListener = (callback) => {\n  const handler = (e) => {\n    let [w, h] = getSize();\n    callback([getP(w, e.x), getP(h, e.y)]);\n  };\n  window.addEventListener(\"mousemove\", handler);\n  const removeListener = () => window.removeEventListener(\"mousemove\", handler);\n  return removeListener;\n};\nconst DEFAULT_RATIO = 30;\n\n//TODO: \"cure breakpoint on difference between -180 and 180\"\nconst getCenter = (point, center = point, ratio) => {\n  let difference = center - point;\n  if (Math.abs(difference) < ratio) return center;\n  return point + Math.sign(difference) * ratio;\n};\nconst modifyPoint = (point, center, ratio) => {\n  return (point - center) / ratio;\n};\nconst setDeviceMoveListener = (callback) => {\n  let xCenter;\n  let yCenter;\n  const handler = (e) => {\n    console.log(e);\n    let x = e.beta;\n    let y = e.gamma;\n    xCenter = getCenter(x, xCenter, DEFAULT_RATIO);\n    yCenter = getCenter(y, yCenter, DEFAULT_RATIO);\n    let mx = modifyPoint(x, xCenter, DEFAULT_RATIO);\n    let my = modifyPoint(y, yCenter, DEFAULT_RATIO);\n    console.log({\n      x,\n      y,\n      xCenter,\n      yCenter,\n      coords: [my, mx],\n    });\n    callback([my, mx]);\n  };\n  window.addEventListener(\"deviceorientation\", handler);\n  const removeListener = () =>\n    window.removeEventListener(\"deviceorientation\", handler);\n  return removeListener;\n};\nconst subscribeToMotion = (callback) => {\n  let cb = (coords) => callback(coords.map((n) => n.toFixed(2)));\n  const removeDeviceMoveListener = setDeviceMoveListener(cb);\n  const removeMouseMoveListener = setMouseMoveListener(cb);\n  return () => {\n    removeMouseMoveListener();\n    removeDeviceMoveListener();\n  };\n};\nexport default subscribeToMotion;\n","import { useCallback, useEffect, useMemo, useState } from \"react\";\n\nconst permissionRequested = () =>\n  typeof DeviceOrientationEvent !== \"undefined\" &&\n  typeof DeviceOrientationEvent.requestPermission === \"function\";\n\nconst useDeviceOrientationGrant = () => {\n  let [granted, setGranted] = useState(permissionRequested() ? false : null);\n\n  const getGrant = useCallback(async () => {\n    if (granted === false) {\n      let result = await DeviceOrientationEvent.requestPermission();\n      let isGranted = result === \"granted\";\n      setGranted(isGranted);\n    }\n  }, [granted]);\n\n  useEffect(() => {\n    if (granted === false) getGrant();\n  });\n\n  return useMemo(\n    () => ({\n      granted,\n      getGrant,\n    }),\n    [granted, getGrant]\n  );\n};\n\nexport default useDeviceOrientationGrant;\n","import React, { useEffect, useState } from \"react\";\nimport FaceImage from \"./src/dogmf_face_face.png\";\nimport GlassesImage from \"./src/dogmf_face_glasses.png\";\nimport ShadowImage from \"./src/dogmf_face_shadow.png\";\nimport HairImage from \"./src/dogmf_face_hair.png\";\nimport CLASSES from \"./src/myPhoto.module.css\";\nimport subscribeToMotion from \"./subscribeToMotion\";\nimport useDeviceOrientationGrant from \"./useDeviceOrientationGrant\";\n\nconst imageMoveStyle = (\n  [x = 0, y = 0] = [0, 0],\n  k = 10,\n  type = \"translate\"\n) => ({ position: \"absolute\", transform: `translate(${x * k}px, ${y * k}px)` });\n\nfunction MyPhoto() {\n  const [coords, setCoords] = useState([0, 0]);\n  const { granted, getGrant } = useDeviceOrientationGrant();\n\n  useEffect(() => {\n    return subscribeToMotion(setCoords);\n  }, []);\n\n  return (\n    <div\n      onClick={granted === false && getGrant}\n      className={CLASSES.containerBlock}\n    >\n      <img\n        className={CLASSES.image}\n        src={FaceImage}\n        style={imageMoveStyle(coords, -5)}\n        alt=\"FaceImage_image\"\n      />\n      <img\n        className={CLASSES.image}\n        src={HairImage}\n        style={imageMoveStyle(coords, -10)}\n        alt=\"HairImage_image\"\n      />\n      <img\n        className={CLASSES.image}\n        src={GlassesImage}\n        style={imageMoveStyle(coords, -2)}\n        alt=\"GlassesImage_image\"\n      />\n      <img\n        className={CLASSES.image}\n        src={ShadowImage}\n        style={imageMoveStyle(coords, 5)}\n        alt=\"ShadowImage_image\"\n      />\n    </div>\n  );\n}\n\nexport default MyPhoto;\n","import \"./App.css\";\nimport MyPhoto from \"./MyPhoto/MyPhoto\";\nimport CLASSES from \"./App.module.css\";\n\nfunction App() {\n  return (\n    <div className={CLASSES.card}>\n      <MyPhoto />\n      <div className={CLASSES.cardText}>\n        <p>\n          Hi, i am <b>dogmf</b>!\n        </p>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"containerBlock\":\"myPhoto_containerBlock__8ymLN\",\"image\":\"myPhoto_image__EoH9X\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"App_card__3tefE\",\"cardText\":\"App_cardText__YpRpD\"};"],"sourceRoot":""}